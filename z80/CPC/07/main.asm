    
  ;------------------------------------------------------------
  ; DIRECTIVES RASM
  ;------------------------------------------------------------
  INCLUDE "rasm.asm"
    
  ;------------------------------------------------------------
  ; GATE ARRAY
  ;------------------------------------------------------------  
  INCLUDE "GA_HSG3170.asm"
  INCLUDE "PPI_8255A.asm"

  ;------------------------------------------------------------
  ; MACROS
  ;------------------------------------------------------------  
  MACRO mMEMCPY_02x08 Scr, Des
    LD    HL, {Scr}
    LD    DE, {Des}
    CALL  RAMCPY_02x08 
  MEND
   
  ;------------------------------------------------------------
  ; ENTREE PRINCIPALE
  ;------------------------------------------------------------
  ORG   #100
  RUN   #100
    
  ;------------------------------------------------------------
  ; INITIALISATION
  ;------------------------------------------------------------  
 
  DI                      ; desactive interruptions masquables
  
  CALL  DisableFirmware
  CALL  InitGame
   
  mMEMCPY_02x08 Sprite_02x08, #C000 + (1*2) + (0*80)
  mMEMCPY_02x08 Sprite_02x08, #C000 + (1*2) + (1*80)
  mMEMCPY_02x08 Sprite_02x08, #C000 + (1*2) + (2*80)
     
  EI                      ; active interruptions masquables
  
  ;------------------------------------------------------------
  ; BOUCLE PRINCIPALE
  ;------------------------------------------------------------  
  
  LOOP: 
        LD    HL,#0040
        CALL  ScanKeyboard
  JR LOOP
  
  ;------------------------------------------------------------
  ; FONCTIONS
  ;------------------------------------------------------------
  INCLUDE "firmware.asm"
  INCLUDE "init.asm"
  INCLUDE "ramcpy.asm"
  INCLUDE "nextline.asm"
  INCLUDE "scankeyboard.asm"
 
  ;------------------------------------------------------------
  ; DONNEES
  ;------------------------------------------------------------  
  INCLUDE "gfx.asm"

  ;------------------------------------------------------------
  ; SORTIE DU PROGRAMME
  ;------------------------------------------------------------
  END: RET
